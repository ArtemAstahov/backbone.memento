// Backbone.Memento v0.3.0
//
// Copyright (C)2011 Derick Bailey, Muted Solutions, LLC
// Distributed Under MIT Liscene
//
// Documentation and Full Licence Availabe at:
// http://github.com/derickbailey/backbone.memento

// ----------------------------
// Backbone.Memento
// ----------------------------
Backbone.Memento=function(c,a){function h(b,l){var d=e[b];if(d!==void 0){var d=i(d,l),f=c.toJSON(),f=i(f,l);var a=d,j=f,f=[];if(a&&j)for(var g in j)j.hasOwnProperty(g)&&(a.hasOwnProperty(g)||f.push(g));var a=c,h;for(h in f)g=f[h],k==="model"?a.unset(g):a.remove(g);k==="model"?c.set(d):c.reset(d);delete e[b]}}function i(b,a){b=_.clone(b);if(a.hasOwnProperty("ignore")&&a.ignore.length>0)for(var d in a.ignore)delete b[a.ignore[d]];return b}this.version="0.3.0";var a=_.extend({ignore:[]},a),e,k=c instanceof
Backbone.Model?"model":"collection";this.store=function(){var b=c.toJSON(),b=i(b,a);e.push(b)};this.restore=function(b){b===void 0&&(b=_.clone(a));var c=e.length-1;if(c<0)return null;h(c,b)};this.restart=function(){if(e.length===0)return null;h(0,a);e=[]};if(k==="model")this.reset=this.restart;e=[]};
