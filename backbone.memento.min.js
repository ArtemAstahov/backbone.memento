// Backbone.Memento v0.2.0
//
// Copyright (C)2011 Derick Bailey, Muted Solutions, LLC
// Distributed Under MIT Liscene
//
// Documentation and Full Licence Availabe at:
// http://github.com/derickbailey/backbone.memento

// ----------------------------
// Backbone.Memento
// ----------------------------
Backbone.Memento=function(h,a){function e(b,f){var g=c[b];if(g!==void 0){var g=i(g,f),d=h.toJSON(),d=i(d,f);var a=g,j=d,d=[];if(a&&j)for(var k in j)j.hasOwnProperty(k)&&(a.hasOwnProperty(k)||d.push(k));var a=h,e;for(e in d)a.unset(d[e]);h.set(g);delete c[b]}}function i(b,a){b=_.clone(b);if(a.hasOwnProperty("ignore")&&a.ignore.length>0)for(var c in a.ignore)delete b[a.ignore[c]];return b}this.version="0.2.0";var a=_.extend({ignore:[]},a),c;this.store=function(){var b=h.toJSON(),b=i(b,a);c.push(b)};
this.restore=function(b){b===void 0&&(b=_.clone(a));var f=c.length-1;if(f<0)return null;e(f,b)};this.reset=function(){if(c.length===0)return null;e(0,a);c=[]};c=[]};
